# Предметно-ориентированное проектирование

-- только информация из лекций (итмо)

## Ограниченный Контекст (Bounded Context)
TODO

## Value-Object
TODO

## ANY(TODO)

## Агрегаты
Агрегаты представляют из себя автономную единицу, обладающую состояниями. Агрегат это дерево сущностей 
(может включать в себя другие сущности).

Например, для интернет-магазина, "заказ" - хороший пример агрегата. Жизненный цикл агрегатов связан с изменением их состояний.

### Свойства агрегатов

Агрегаты подразумевают использование транзакционных систем в реляционных базах данных 
(которые удовлетворяют [ACID](https://github.com/babtiss/cheat-sheet/tree/master/data_base/acid) требованиям)

Инварианты - неизменяемые свойства, которые должны выполняться при изменении системы. 
(Могут быть нарушены при определенной настройке транзакций)

Аномалии - (тема транзакций) аномалия, которая возникает (один из примеров) при ситуации когда мы из двух разных транзакций пытаемся изменить одни и те же данные 
(например, ячейки А и В) так, что первая транзакция затронет ячейку A, а вторая — ячейку В и мы получим неконсистентный результат.

Оптимистичная блокировка - (тема транзакций) настройка уровня изоляций, позволяющий избавиться от возможных аномалий.

### Как хранятся агрегаты в базе данных
На примере `mongoDB` данные хранятся как документ с деревом сущностей.
Для изменения подсущности - достается все дерево.
![img](img.png)

Чем больше сущностей мы объединим в один агрегат, тем больше мы потребляем памяти и ресурсов.
