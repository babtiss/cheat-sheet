# Шардирование

## Вертикальный шардинг (партицирование)
`Партицирование` — это когда мы одну большую таблицу разделяем на много маленьких по какому-либо принципу.
![alt text](image.png)

## Как делается в коде
Делаем мейн таблицу

![alt text](image-2.png)

Создаем правило - ограничение

![alt text](image-4.png)

> Проблема знаменитостей - иногда разделение приводит к неравномерному распределению данных и нагрузки.

## Вертикальный шардинг
С горизонтальным шардингом все примерно так же, но при этом у нас таблички лежат в разных базах на других инстансах.
![alt text](image-1.png)

Тоже самое только добавим CONSTRAINT

![alt text](image-5.png)

Настраиваем шардинг на основном сервере

![alt text](image-6.png)

Заводим таблицу на основном сервере

![alt text](image-7.png)

Покрываем через view 

![alt text](image-8.png)

Далее можно настроить правила ...

# Реплики

`Master-Slave` - мастер пишет, несколько слейвов читают. Если мастер выйдет из строя - то слейв становится мастером.

`Master-Master` - мастеры и пишут и читают. Сложность в синхронизации данных.

