# Понимание go.mod

### go.mod
Файл `go.mod` - это корень управления зависимостями в GoLang. Все модули, которые необходимы или будут использоваться в проекте, хранятся в файле `go.mod`.

Для всех пакетов, которые мы собираемся импортировать / использовать в нашем проекте, будет создана запись этих модулей в `go.mod`.

`go mod init` — создает новый модуль, инициализируя файл go.mod, описывающий модуль. Вначале он только добавит путь к модулю и версию Go в файл `go.mod`.

После выполнения любой команды создания пакета, такой как `go build`, `go test`
в первый раз, он будет устанавливать все пакеты с определенными версиями т.е. которые являются последними на данный момент. Он также создаст файл `go.sum`, который поддерживает контрольную сумму, поэтому при повторном запуске проекта он не установит все пакеты снова. `go.sum` изменять вручную не нужно.

### Пример go.mod файла

```go
module cheat-sheet

go 1.18

require (
    github.com/lib/pq v1.10.6
    github.com/gin-gonic/gin v1.6.3
)

replace github.com/path/name => /localpath/go/src/name
```

Подробнее по каждому методу:
- `module` подразумевает URL-адрес, поддерживаемый для контроля версий, то есть объявление модуля.
- `go 1.18` - это версия golang, которую использует этот проект, которая является последней на момент создания go.mod.
- `require` будет включать все модули зависимостей и связанную версию, которую мы собираемся использовать в нашем проекте.
- `replace` указывает на локальную версию зависимости в Go, а не на git-web. Он создаст локальную копию поставщика с доступными версиями, поэтому нет необходимости устанавливать каждый раз, когда мы хотим обратиться к поставщику.
- `//indirect` подразумевает, что мы не используем эти зависимости внутри нашего проекта, но есть какой-то модуль, который их импортирует.

### `go mod tidy`:
Он свяжет текущий импорт в проекте и пакетах, перечисленных в go.mod

### `go mod vendor`:
Он создает каталог поставщиков с доступными версиями.
Он копирует все сторонние зависимости в папку поставщика в корне вашего проекта.

### `go clean -modcache`:
Эта команда используется для очистки кеша модов, который хранится в $GOPATH/pkg/mod. Эта команда используется для удаления установленных пакетов.

Флаг -modcache удаляет весь кеш загрузки модуля, включая распакованный исходный код версий зависимостей.